<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Slmsky" />


    
    


<meta name="description" content="一个默默无闻的虫子">
<meta property="og:type" content="website">
<meta property="og:title" content="Slmsky">
<meta property="og:url" content="http://zgis.org/index.html">
<meta property="og:site_name" content="Slmsky">
<meta property="og:description" content="一个默默无闻的虫子">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Slmsky">
<meta name="twitter:description" content="一个默默无闻的虫子">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Slmsky" type="application/atom+xml">



    <link rel="shortcut icon" href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/head.jpg">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css" type="text/css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>Slmsky</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/head.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Slmsky</a></h1>
        </hgroup>

        
        <p class="header-subtitle">一个默默无闻的虫子</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:sunliming88@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" href="http://weibo.com/lyslm" title="新浪微博"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 博客园" href="http://www.cnblogs.com/sunliming" title="博客园"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/日记/">日记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">一个GIS的博士</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Slmsky</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/head.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Slmsky</a></h1>
            </hgroup>
            
            <p class="header-subtitle">一个默默无闻的虫子</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:sunliming88@gmail.com" title="Email"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/lyslm" title="新浪微博"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa 博客园" target="_blank" href="http://www.cnblogs.com/sunliming" title="博客园"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-CSharpNetLanguageCallCppDLL" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/20/CSharpNetLanguageCallCppDLL/" class="article-date">
      <time datetime="2017-04-19T16:00:00.000Z" itemprop="datePublished">2017-04-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/20/CSharpNetLanguageCallCppDLL/">C# Net调用C++ DLL的三种方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="C_23_Net_u8C03_u7528C++_DLL_u65B9_u6CD5"><a href="#C_23_Net_u8C03_u7528C++_DLL_u65B9_u6CD5" class="headerlink" title="C# Net调用C++ DLL方法"></a>C# Net调用C++ DLL方法</h4><h1 id="1_uFF1A_u91C7_u7528_u6258_u7BA1C++"><a href="#1_uFF1A_u91C7_u7528_u6258_u7BA1C++" class="headerlink" title="1：采用托管C++"></a>1：采用托管C++</h1><p>主要利用VC.Net的桥接作用，VC.Net和C#可以互相调用，同时也支持调用标准C++ 写的DLL的类和接口，将Net需要调用的类和函数采用VC++的托管类都重新包装一遍，返回C++对象指针为一个VC++ Net类型的对象即可。这需要用.NET运行时能看得懂的方式把C++的DLL的导出函数声明一遍。因为托管的环境和非托管的环境有很大的区别，程序员需要告诉.NET运行时，非托管环境下的函数签名（function signature）是什么样子的。函数签名包括函数的参数和返回值，以及参数的封送顺序等等。</p>
<p>问题：</p>
<p>1：需要都包装一遍，但是没有技术难度，重复工作</p>
<p>2：来回的资源调用和智能指针的使用，需要考虑内存泄露，到底是Net部分还是C++部分申请和释放的。</p>
<p>3：对于VS版本编译的DLL有严格要求应该</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//托管类，针对Point类的函数进行包装</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ref <span class="keyword">class</span> Manage_Point</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    Manage_Point(Real x, Real y, Real z);</span><br><span class="line"></span><br><span class="line">    Manage_Point();</span><br><span class="line"></span><br><span class="line">    Manage_Point\^ clone();</span><br><span class="line"></span><br><span class="line">    !Manage_Point();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Real x, Real y, Real z)</span></span>;</span><br><span class="line"></span><br><span class="line">    Manage_Point(TDMine::Core::Point&amp; point);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">    property Real x</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(Real value)</span></span>&#123; nativePoint-setX(value); &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">Real <span class="title">get</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> nativePoint-x(); &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    property Real y</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(Real value)</span></span>&#123; nativePoint-setY(value); &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">Real <span class="title">get</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> nativePoint-y(); &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    property Real z</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(Real value)</span></span>&#123; nativePoint-setZ(value); &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">Real <span class="title">get</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> nativePoint-z(); &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment">//此处析构最好改成智能指针。</span></span><br><span class="line"></span><br><span class="line">    TDMine::Core::Point* nativePoint;</span><br><span class="line"></span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">//C#调用：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Windows;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> ManageTDMine.Core;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> CSharpTDMineApp</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> Program</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(<span class="built_in">string</span>[] args)</span></span><br><span class="line"></span><br><span class="line">        </span>&#123;</span><br><span class="line"></span><br><span class="line">            Manage_Point point = <span class="keyword">new</span> Manage_Point(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            point.setValue(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">            Console.Write(point.x);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2_uFF1A_u91C7_u7528Windows_u6807_u51C6_u5BFC_u5165_u5BFC_u51FA_u8C03_u7528DLL"><a href="#2_uFF1A_u91C7_u7528Windows_u6807_u51C6_u5BFC_u5165_u5BFC_u51FA_u8C03_u7528DLL" class="headerlink" title="2：采用Windows标准导入导出调用DLL"></a>2：采用Windows标准导入导出调用DLL</h1><p>C#调用C++类库和调用Windows API一样，利用DllImport这个Attribute导入，将原始的C++类库函数声明为C导出类型，然后在C#调用的时候需要做一个对象类型的映射，按照普通C函数DLL调用方法调用，在启动时载入DLL，然后转换。对于复杂的C++对象类型，比如二维</p>
<p>未做测试，但是更为复杂，而且牵涉内存拷贝和类型转换，基本是按照C语言的方法。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DLL库</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">ifdef</span> TESTDLL_EXPORTS</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> TESTDLL_API __declspec(dllexport)</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">else</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> TESTDLL_API __declspec(dllimport)</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此类是从 testdll.dll 导出的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> TESTDLL_API Ctestdll &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"> Ctestdll(<span class="keyword">void</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// <span class="doctag">TODO:</span> 在此添加您的方法。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;<span class="keyword">return</span> a+b;&#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">Sub</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;<span class="keyword">return</span> a-b;&#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">Mul</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;<span class="keyword">return</span> a*b;&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> TESTDLL_API <span class="keyword">int</span> ntestdll;</span><br><span class="line"></span><br><span class="line"><span class="function">TESTDLL_API <span class="keyword">int</span> <span class="title">fntestdll</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">//这里有一个class ：Ctestdll，它有三个function：Add、Sub、Mul，通过使用uedit32查看到它对应的三个导出函数分别是</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1、?Add@Ctestdll@@QAEHHH@Z</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2、?Sub@Ctestdll@@QAEHHH@Z</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3、?Mul@Ctestdll@@QAEHHH@Z</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">//C#调用包装</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> WindowsFormsApplication2</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> Ctestdll</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        [DllImport(<span class="string">"testdll.dll"</span>, EntryPoint = <span class="string">"?Add@Ctestdll@@QAEHHH@Z"</span>, CharSet = CharSet.Auto)]</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">myAdd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span><br><span class="line"></span><br><span class="line">        </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> Add(a, b);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [DllImport(<span class="string">"testdll.dll"</span>, EntryPoint = <span class="string">"?Sub@Ctestdll@@QAEHHH@Z"</span>, CharSet = CharSet.Auto)]</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">Sub</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">mySub</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span><br><span class="line"></span><br><span class="line">        </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> Sub(a, b);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        [DllImport(<span class="string">"testdll.dll"</span>, EntryPoint = <span class="string">"?Mul@Ctestdll@@QAEHHH@Z"</span>, CharSet = CharSet.Auto)]</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">Mul</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">myMul</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span><br><span class="line"></span><br><span class="line">        </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> Mul(a, b);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">//C#使用时候和普通的类没有区别</span></span><br></pre></td></tr></table></figure>
<h1 id="3_uFF1A_u91C7_u7528SWIG_u8C03_u7528DLL"><a href="#3_uFF1A_u91C7_u7528SWIG_u8C03_u7528DLL" class="headerlink" title="3：采用SWIG调用DLL"></a>3：采用SWIG调用DLL</h1><p>采用开源库swig进行脚本封装，优点是可以一次支持多种语言，封装的脚本很简单明了，利用swig工具根据定义的接口文件，会重新生成warp文件和C#调用的cs文件。</p>
<p>其原理是从C/C++头文件中找到申明并利用他们生成脚本语言访问C/C++代码所必须的封装代码。SWIG具有高度可自定义的特点，它能帮助你生成适合你的应用程序的封装包。</p>
<p>做小项目直接《C#调用C++写的Native DLL》工作量也能接受，但是，当接口变得很复杂这个方式就不经济。</p>
<p>SWIG是个免费开源的C++接口生成工具，可以支持20多种常见计算机编程语言，可以帮助我们快速生成C++的外部接口，C#的调用接口。这篇文章就是介绍SWIG的最基本使用。</p>
<p><strong>部署SWIG运行环境</strong></p>
<p>从www.swig.org下载SWIG Win 3.0.0并解压缩到D:\SDK (你也可以选择其它目录)，为系统配置环境变量SWIG_HOME，</p>
<p><strong>为测试SWIG工具的功能，准备C++工程和C#工程</strong></p>
<p>我们需要个含C++和C#工程的Solution来测试我们的SWIG工具。</p>
<p><strong>先建立C++工程</strong></p>
<p>在Visual Studio中新建Win32工程，选择应用程序类型为DLL，空项目。给项目起名为SWIG_Tutorial1</p>
<p>为空项目添加PlusPlusClass.h和PlusPlusClass.cpp两个文件</p>
<p>PlusPlusClass.h的源码清单如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">ifndef</span> _PLUSPLUSCLASS_H_</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">define</span> _PLUSPLUSCLASS_H_</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> kagula</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">namespace</span> cplusplus</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">class</span> CPlusPlusClass</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 测试对C++模块中定义的Class的调用</span></span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">//PlusPlusClass.cpp的源码清单如下</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">"PlusPlusClass.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> kagula</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">namespace</span> cplusplus &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 测试对C++模块中定义的Class的调用</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> CPlusPlusClass::Add(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>在当前Solution中添加C#的Win32 工程</strong></p>
<p>新建项目名称为“SWIG_Tutorial1_CSharp”修改默认的Program.cs源文件内容如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> SWIG_Tutorial1_CSharp</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> Program</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span><span class="params">(<span class="built_in">string</span>[] args)</span></span><br><span class="line"></span><br><span class="line">        </span>&#123;</span><br><span class="line"></span><br><span class="line">            CPlusPlusClass fromCPlusPlus = <span class="keyword">new</span> CPlusPlusClass();</span><br><span class="line"></span><br><span class="line">             </span><br><span class="line"></span><br><span class="line">            Console.WriteLine(<span class="string">"来自C++的调用结果："</span>+fromCPlusPlus.Add(<span class="number">123</span>, <span class="number">1000</span>));</span><br><span class="line"></span><br><span class="line">            Console.ReadKey();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>这时候还没有生成cs文件，上面的代码应该会出现红线。</strong></p>
<p><strong>SWIG接口定义文件</strong>C++ Native DLL项目的源代码写好后，我们要新建接口定义文件，即那些东西要暴露给C#工程。</p>
<p>为当前项目添加SWIG_Tutorial1.i文件，源码清单如下</p>
<p>%module SWIG_Tutorial1</p>
<p>%{\<br>/* 在包装代码中包含头文件 */\<br>#include “PlusPlusClass.h”\<br>%}</p>
<p>/* 解析头文件生成包装代码 */\<br>%include “PlusPlusClass.h”</p>
<p>SWIG接口定义文件（I文件）需要Build后才会产生C++和C#的接口定义文件。</p>
<p>打开SWIG_Tutorial.i属性页</p>
<p>为SWIG_Tutorial1.i定义Item Type为Custom Build Tool.点击OK后关闭属性页。</p>
<p>再次打开SWIG_Tutorial1.i文件的属性页，参考下面的图片操作</p>
<p><strong>在Command Line中输入下面五行信息</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">echo Invoking SWIG...</span><br><span class="line"></span><br><span class="line">echo SWIG_HOME=$(SWIG_HOME)</span><br><span class="line"></span><br><span class="line">echo on</span><br><span class="line"></span><br><span class="line">$(SWIG_HOME)\swig.exe -c++ -csharp -outdir <span class="string">"$(SolutionDir)$(ProjectName)\interface"</span> <span class="string">"%(FullPath)"</span></span><br><span class="line"></span><br><span class="line">echo off</span><br></pre></td></tr></table></figure>
<p><strong>在Outputs中输入下面这一行信息</strong>%(Filename)_wrap.cxx</p>
<p>在C++项目的路径下新建interface目录，用来存放swig.exe输出的cs文件。</p>
<p>swig.exe读取SWIG_Tutorial1.i文件产生接口文件（SWIG_Tutorial1.cxx文件和几个cs类型文件）。</p>
<p>-c++ 参数告诉swig.exe当前是个C++工程，如果不指定，swig.exe会把当前项目当作是C语言工程。</p>
<p>-csharp 参数告诉swig.exe输出C#的调用接口，swig.exe会产生cs源文件,供C#项目调用。</p>
<p>-outdir参数让swig.exe把cs文件输出到指定目录</p>
<p><strong>接下来为C++工程添加Build后复制动态链接库命令</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在[Configuration Properties]-\[Build Events]-\[Post-BuildEvent]-\[Command Line]输入框中插入复制DLL文件的命令</span><br><span class="line"></span><br><span class="line">echo on</span><br><span class="line"></span><br><span class="line">copy<span class="string">"$(OutDir)$(ProjectName).dll"</span> <span class="string">"$(SolutionDir)SWIG_Tutorial1_CSharp\bin\Debug"</span></span><br><span class="line"></span><br><span class="line">echo off</span><br><span class="line"></span><br><span class="line">在[Configuration Properties]-\[Build Events]-\[Post-BuildEvent]-\[Description]输入框中插入对命令的描述</span><br><span class="line"></span><br><span class="line">例如“Copy native dll to csharp run directory”，其中“SWIG_Tutorial1_CSharp”是用来测试C++项目的C Sharp项目路径。</span><br></pre></td></tr></table></figure>
<p>这样C++工程Build完毕后会把DLL复制到C#工程的bin\Debug目录下。</p>
<p><strong>开始测试</strong></p>
<p>Build SWIG_Tutorial1.i文件后，swig.exe会在C++工程的当前目录中产生SWIG_Tutorial1.cxx文件，在Interface目录下产生cs文件。在C++工程中添加SWIG_Tutorial1.cxx文件，重新Rebuild C++工程。</p>
<p>设置C#工程为启动项目。</p>
<h1 id="4_uFF1A_u91C7_u7528COM_u7EC4_u4EF6"><a href="#4_uFF1A_u91C7_u7528COM_u7EC4_u4EF6" class="headerlink" title="4：采用COM组件"></a>4：采用COM组件</h1><p>COM不熟悉，而且需要注册到系统中，繁琐</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-phd degree paper submit--2017.4.13" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/04/14/phd degree paper submit--2017.4.13/" class="article-date">
      <time datetime="2017-04-14T10:09:10.275Z" itemprop="datePublished">2017-04-14</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="u4ECA_u5929_u63D0_u4EA4_u4E86_u535A_u58EB_u8BBA_u6587_u20132017-4-13"><a href="#u4ECA_u5929_u63D0_u4EA4_u4E86_u535A_u58EB_u8BBA_u6587_u20132017-4-13" class="headerlink" title="今天提交了博士论文–2017.4.13"></a>今天提交了博士论文–2017.4.13</h2><h2 id="u535A_u58EB-_u8BBA_u6587-SCI"><a href="#u535A_u58EB-_u8BBA_u6587-SCI" class="headerlink" title="博士-论文-SCI"></a>博士-论文-SCI</h2><p>2013-2017.4.3 四年悬着的心放下了，博士可以毕业了，这三个词语是这几年每天都要说的。。。</p>
<p>难，真的挺难的，3.21 SCI接收，才终于松了一大口气</p>
<p>在去年每天面临的问题是分手余痛，论文悲剧。。。</p>
<p>在今年一切得以乌云散去，终归要遍地阳光。。。</p>
<p>期望今后一切更好。。。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dawn<span class="annotation">@Wuhan</span></span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-new thinking at 2016 year" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/01/new thinking at 2016 year/" class="article-date">
      <time datetime="2016-05-01T12:32:04.638Z" itemprop="datePublished">2016-05-01</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/01/new thinking at 2016 year/">人生将至而立--今天自我思考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>人生将至而立–今天自我思考</p>
</blockquote>
<p>Welcome to <a href="http://slmsky.github.io/" target="_blank" rel="external">SLM’s blog</a></p>
<h3 id="2016-5-1"><a href="#2016-5-1" class="headerlink" title="2016.5.1"></a>2016.5.1</h3><p> 今天的我，多了许多许多的思考，在三年前的同时期，那时候境遇不错，如今困在博士的困局中，感情和学业双双失败，可以说自己赌输了，理想太美好，现实很骨感，现在面临几个问题。</p>
<ul>
<li><p><strong>和女友这种状态</strong>，是否要放弃掉，我自己的脑海里和她几乎可以称之为完美的恋爱，不管是学习，人的性格进取，两个家庭的距离等等都不错，因而耗尽三年时间想把她握在手中，但是回到过去那句话，手中的沙子，握紧了就慢慢的要流出手心了，她现在可以罗列出我和我爸妈各种不好不满，而我感觉我依然耗尽所有的能力和努力，她的父母至今对我可能只是为了儿女想法的妥协和貌合神离，慢慢发现女友对我的不满可能来自于我性格的羸弱，我一味的对她让和让她自信心爆棚，而对我这边她意见越来越多，越来越敢说敢做，想法越来越多，我可能与她也渐行渐远就，她也会对别人和生活要求越来越多，光有自信肯定是不够的，方方面面的事情，怎么办？她对自己的期待和要求很高，就算临时再走到一起，那么会不会接下来一辈子都不安稳，不安分，像现在这样天天闹矛盾，看不顺眼，找事情。。。</p>
</li>
<li><p><strong>和家庭的状态</strong> 现在和家庭和姐姐之间，渐行渐远，特别是姐姐，现在和我已经没有沟通了，她眼里似乎只有她现在自己的家庭和孩子，慢慢的分化为两家人吧，她可能也是有心无力吧，我也尽量不去打扰她了，她肯定比我想的开，她现在已经走出来了最困难的时间，过上了自己的生活，不再需要我们了吧，姐夫可能自始至终就没看上我们家的每个人过，包括我和父母，他并不会主动为别人分担和思考什么，换个说法，我的这些担心应该要说明我必须长大了，需要自己考虑自己的事情，自己为自己负责，慢慢需要组织起来，为他人，为自己，不能再有依赖心理了，对于父母，他们毫无错误，只是他们的习惯和他们的思维等等与我不同而已。。。只要他们健康，其他的都不重要，这就足够了。</p>
</li>
<li><strong>我自己的想法</strong> 我需要冷静，需要现实，需要成长，我需要更open，需要更多东西。。。</li>
<li><strong>文章</strong></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2015to2016" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/31/2015to2016/" class="article-date">
      <time datetime="2015-12-31T15:02:39.278Z" itemprop="datePublished">2015-12-31</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/31/2015to2016/">送别2015年，等待2016</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="u9001_u522B2015_u5E74_uFF0C_u7B49_u5F852016"><a href="#u9001_u522B2015_u5E74_uFF0C_u7B49_u5F852016" class="headerlink" title="送别2015年，等待2016"></a>送别2015年，等待2016</h1><h3 id="u603B_u7ED32015_u5E74_uFF0C_u6211_u601D_u7EF4_u4E2D_u6709_u51E0_u4EF6_u4E8B_u60C5_uFF1A"><a href="#u603B_u7ED32015_u5E74_uFF0C_u6211_u601D_u7EF4_u4E2D_u6709_u51E0_u4EF6_u4E8B_u60C5_uFF1A" class="headerlink" title="总结2015年，我思维中有几件事情："></a>总结2015年，我思维中有几件事情：</h3><ul>
<li>写了一篇EI文章，但是没被收录，选择失败了</li>
<li>写了一篇SCI文章，目前还在审，难度很大</li>
<li>见了女朋友的父母家人，迈出了重要的一步</li>
<li>和女友相处了一次最长的时间20天</li>
<li>尝试用博士的身份了找了一次工作</li>
<li>博士真正接触了一个项目</li>
<li>妈妈的腿脚康复了</li>
<li>多了个外甥女 </li>
<li>。。。</li>
</ul>
<h3 id="u5C55_u671B_u4E0B2016_u5E74_uFF0C_u6211_u60F3_u6709_u51E0_u4EF6_u4E8B_u60C5_u8981_u505A_u597D_uFF1A"><a href="#u5C55_u671B_u4E0B2016_u5E74_uFF0C_u6211_u60F3_u6709_u51E0_u4EF6_u4E8B_u60C5_u8981_u505A_u597D_uFF1A" class="headerlink" title="展望下2016年，我想有几件事情要做好："></a>展望下2016年，我想有几件事情要做好：</h3><ul>
<li>博士毕业论文搞定</li>
<li>和女友的关系，必须缓和，更进一步</li>
<li>尽量能和叔叔阿姨，更熟悉一点，不能再这么生分</li>
<li>尽可能锻炼好身体</li>
<li>让自己的思绪，为人处世，有所条理</li>
<li>拖延症，想办法克服</li>
<li>爱情，事业都要进步</li>
<li>总结下今年失败之处</li>
</ul>
<h4 id="Good_Luck_21_Liming_26amp_3BLingyan_@Wuhan_2015-12-31"><a href="#Good_Luck_21_Liming_26amp_3BLingyan_@Wuhan_2015-12-31" class="headerlink" title="Good Luck! Liming&amp;Lingyan @Wuhan 2015.12.31"></a>Good Luck! Liming&amp;Lingyan @Wuhan 2015.12.31</h4>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-dashuya" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/15/dashuya/" class="article-date">
      <time datetime="2015-12-15T12:20:41.450Z" itemprop="datePublished">2015-12-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/15/dashuya/">大树芽</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="u6CB3_u5357_u7701_u6D1B_u9633_u5E02_u5D69_u53BF_u7EA2_u5802_u6751_u9EC4_u5E84_u4E61_u5927_u6811_u82BD"><a href="#u6CB3_u5357_u7701_u6D1B_u9633_u5E02_u5D69_u53BF_u7EA2_u5802_u6751_u9EC4_u5E84_u4E61_u5927_u6811_u82BD" class="headerlink" title="河南省洛阳市嵩县红堂村黄庄乡大树芽"></a>河南省洛阳市嵩县红堂村黄庄乡大树芽</h1><p>##Google卫星图俯瞰<br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/dashuya.jpg" alt="区域位置卫星图片"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Intersection_paper" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/15/Intersection_paper/" class="article-date">
      <time datetime="2015-12-15T10:03:00.000Z" itemprop="datePublished">2015-12-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/15/Intersection_paper/">A Fast Triangular Surface Intersection Algorithm and its Typical geological Applications</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>##A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications</p>
<p>This paper published on journal of Electronic Journal of Geotechnical Engineering<br>(EJGE) is my first try during my phD. In this paper,An improved algorithm is presented to resolve intersection related problem of triangular surface in 3D geological modeling and analysis, using a structured data search algorithm to exclude most of non-intersected triangles away from intersecting line efficiently and accurately. And a new improved OBB search tree is built to obtain the intersection quickly; triangles near intersection are reconstructed optimized at last. Typical applications of 3D geological modeling using presented algorithm is researched, including of cutting geological model by parameter plane, faults and stratigraphic intersection and geological region discretization. Practice has proved that the method is fast and reliable by comparing to other several methods, especially has obvious efficiency advantages in surface intersection with large amount of data. And it has grate advantages in 3D geological modeling and analysis in surface intersection issues and providing an effective support in building geological model automatically. </p>
<p>###The reference formation is as following:<br>&gt;</p>
<blockquote>
<p>Wei W, Liming S, Lingyan J, et al. A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications[J].Vol. 20 [2015], Bund. 21,11507-11517</p>
<p>######And the paper url is free at <a href="http://www.ejge.com/2015/Ppr2015.0780ma.pdf" target="_blank" rel="external">http://www.ejge.com/2015/Ppr2015.0780ma.pdf</a></p>
</blockquote>
<ol>
<li>This is the method workflow:<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure1.png" target="_blank" rel="external">The workflow</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure1.png" alt=""></li>
<li>The intersection between surfaces by bounding box<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure2.png" target="_blank" rel="external">bounding box interseciton method</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure2.png" alt=""></li>
<li>Intersection between Stratums and triangular surfaces<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure3.png" target="_blank" rel="external">Intersection between Stratums and triangular surfaces</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure3.png" alt=""><br>4.Algorithm effective comparesion of different method, it shows that my method is more fast even in the large amount trianges.<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure4.png" target="_blank" rel="external">Algorithm effective comparesion of different method</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure4.png" alt=""></li>
</ol>
<h2 id="23_23_23_23_23_23The_releation_C++_code_can_be_got_by_email_me_sunliming88_23gmail-com_28_23_is_instead_of_@_29"><a href="#23_23_23_23_23_23The_releation_C++_code_can_be_got_by_email_me_sunliming88_23gmail-com_28_23_is_instead_of_@_29" class="headerlink" title="######The releation C++ code can be got by email me <b>sunliming88#gmail.com</b>(# is instead of @)."></a>######The releation C++ code can be got by email me <b>sunliming88#gmail.com</b>(# is instead of @).</h2><h2 id="23_23_23_23_23_23Note_3A_Today_i_am_sad_2Cfor_my_paper_has_many_problem-_Good_luck_to_me_21"><a href="#23_23_23_23_23_23Note_3A_Today_i_am_sad_2Cfor_my_paper_has_many_problem-_Good_luck_to_me_21" class="headerlink" title="######Note: Today i am sad,for my paper has many problem. Good luck to me!"></a>######Note: Today i am sad,for my paper has many problem. Good luck to me!</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/15/A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications/" class="article-date">
      <time datetime="2015-12-15T10:03:00.000Z" itemprop="datePublished">2015-12-15</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/15/A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications/">A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="A_Fast_Triangular_Surface_Intersection_Algorithm_and_its_Typical_Geological_Applications"><a href="#A_Fast_Triangular_Surface_Intersection_Algorithm_and_its_Typical_Geological_Applications" class="headerlink" title="A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications"></a>A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications</h2><p>This paper published on journal of Electronic Journal of Geotechnical Engineering<br>(EJGE) is my first try during my phD. In this paper,An improved algorithm is presented to resolve intersection related problem of triangular surface in 3D geological modeling and analysis, using a structured data search algorithm to exclude most of non-intersected triangles away from intersecting line efficiently and accurately. And a new improved OBB search tree is built to obtain the intersection quickly; triangles near intersection are reconstructed optimized at last. Typical applications of 3D geological modeling using presented algorithm is researched, including of cutting geological model by parameter plane, faults and stratigraphic intersection and geological region discretization. Practice has proved that the method is fast and reliable by comparing to other several methods, especially has obvious efficiency advantages in surface intersection with large amount of data. And it has grate advantages in 3D geological modeling and analysis in surface intersection issues and providing an effective support in building geological model automatically. </p>
<h3 id="The_reference_formation_is_as_following_3A"><a href="#The_reference_formation_is_as_following_3A" class="headerlink" title="The reference formation is as following:"></a>The reference formation is as following:</h3><blockquote>
<p>Wei W, Liming S, Lingyan J, et al. A Fast Triangular Surface Intersection Algorithm and its Typical Geological Applications[J].Vol. 20 [2015], Bund. 21,11507-11517</p>
<h6 id="And_the_paper_url_is_free_at_http_3A//www-ejge-com/2015/Ppr2015-0780ma-pdf"><a 2015="" href="#And_the_paper_url_is_free_at_http_3A//www-ejge-com/2015/Ppr2015-0780ma-pdf" class="headerlink" title="And the paper url is free at <a href=" http:="" www.ejge.com="" ppr2015.0780ma.pdf"="">http://www.ejge.com/2015/Ppr2015.0780ma.pdf</a>">And the paper url is free at <a href="http://www.ejge.com/2015/Ppr2015.0780ma.pdf" target="_blank" rel="external">http://www.ejge.com/2015/Ppr2015.0780ma.pdf</a></h6></blockquote>
<ol>
<li>This is the method workflow:<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure1.png" target="_blank" rel="external">The workflow</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure1.png" alt=""></li>
<li>The intersection between surfaces by bounding box<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure2.png" target="_blank" rel="external">bounding box interseciton method</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure2.png" alt=""></li>
<li>Intersection between Stratums and triangular surfaces<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure3.png" target="_blank" rel="external">Intersection between Stratums and triangular surfaces</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure3.png" alt=""><br>4.Algorithm effective comparesion of different method, it shows that my method is more fast even in the large amount trianges.<br><a href="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure4.png" target="_blank" rel="external">Algorithm effective comparesion of different method</a><br><img src="https://raw.githubusercontent.com/slmsky/slmsky.github.io/master/photo/figure4.png" alt=""></li>
</ol>
<h6 id="The_releation_C++_code_can_be_got_by_email_me_sunliming88_23gmail-com_28_23_is_instead_of_@_29"><a href="#The_releation_C++_code_can_be_got_by_email_me_sunliming88_23gmail-com_28_23_is_instead_of_@_29" class="headerlink" title="The releation C++ code can be got by email me <b>sunliming88#gmail.com</b>(# is instead of @)."></a>The releation C++ code can be got by email me <b>sunliming88#gmail.com</b>(# is instead of @).</h6><hr>
<h2 id="23_23_23_23_23_23Note_3A_Today_i_am_sad_2Cfor_my_paper_has_many_problem-_Good_luck_to_me_21"><a href="#23_23_23_23_23_23Note_3A_Today_i_am_sad_2Cfor_my_paper_has_many_problem-_Good_luck_to_me_21" class="headerlink" title="######Note: Today i am sad,for my paper has many problem. Good luck to me!"></a>######Note: Today i am sad,for my paper has many problem. Good luck to me!</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Test" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/12/Test/" class="article-date">
      <time datetime="2015-12-12T10:03:00.000Z" itemprop="datePublished">2015-12-12</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/12/Test/">XXXXXXXXXXX</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <ol>
<li>我喜欢简约。所以标签云，搜索框都拿掉了</li>
<li>接地气一点。</li>
<li>让大家把注意力放到内容上。这是本主题设计初衷</li>
<li>主题不支持IE6，7，8。以后也不会</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-first-blog" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/12/first-blog/" class="article-date">
      <time datetime="2015-12-12T09:08:23.811Z" itemprop="datePublished">2015-12-12</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/12/first-blog/">My blog title</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>My Blog Website</p>
</blockquote>
<p>Welcome to <a href="http://slmsky.github.io/" target="_blank" rel="external">SLM’s blog</a></p>
<h3 id="MY_plan"><a href="#MY_plan" class="headerlink" title="MY plan"></a>MY plan</h3><ol>
<li>Record my idea usually.</li>
<li>Share useful information.</li>
<li>Test.</li>
<li>finish.</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日记/">日记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/08/hello-world/" class="article-date">
      <time datetime="2015-12-08T10:54:28.331Z" itemprop="datePublished">2015-12-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/08/hello-world/">Hello World</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start"><a href="#Quick_Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create_a_new_post"><a href="#Create_a_new_post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server"><a href="#Run_server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files"><a href="#Generate_static_files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites"><a href="#Deploy_to_remote_sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 Slmsky
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-19315661-3', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>